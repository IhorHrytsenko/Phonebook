(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(t,e,n){"use strict";var c=n(5),a=n.n(c),r=n(16),o=n(13),s=n.n(o),u=n(4),i=function(t){s.a.defaults.headers.common.Authorization="".concat(t)},l=function(){s.a.defaults.headers.common.Authorization=""},f=Object(u.c)("contacts/registerContacts",function(){var t=Object(r.a)(a.a.mark((function t(e){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("https://connections-api.herokuapp.com/users/signup",e);case 3:return n=t.sent,c=n.data,i(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),p=Object(u.c)("contacts/loginContacts",function(){var t=Object(r.a)(a.a.mark((function t(e){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("https://connections-api.herokuapp.com/users/login",e);case 3:return n=t.sent,c=n.data,i(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),h=Object(u.c)("contacts/refreshContacts",function(){var t=Object(r.a)(a.a.mark((function t(e,n){var c,r,o,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(r=c.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return i(r),t.prev=5,t.next=8,s.a.get("https://connections-api.herokuapp.com/users/current");case 8:return o=t.sent,u=o.data,t.abrupt("return",u);case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),b={registerContacts:f,loginContacts:p,logoutContacts:Object(u.c)("contacts/logoutContacts",Object(r.a)(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("https://connections-api.herokuapp.com/users/logout");case 3:return e=t.sent,n=e.data,l(),t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),refreshContacts:h};e.a=b},21:function(t,e,n){"use strict";var c=n(5),a=n.n(c),r=n(16),o=n(13),s=n.n(o),u=n(4),i=Object(u.c)("contacts/fetchContacts",function(){var t=Object(r.a)(a.a.mark((function t(e){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.get("https://connections-api.herokuapp.com/contacts",e);case 3:return n=t.sent,c=n.data,t.abrupt("return",c);case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()),l=Object(u.c)("contacts/fetchAddContacts",function(){var t=Object(r.a)(a.a.mark((function t(e){var n,c,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.name,c=e.number,t.prev=1,t.next=4,s.a.post("https://connections-api.herokuapp.com/contacts",{name:n,number:c});case 4:return r=t.sent,o=r.data,t.abrupt("return",o);case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()),f=Object(u.c)("contacts/fetchDeleteContacts",function(){var t=Object(r.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.delete("https://connections-api.herokuapp.com/contacts/".concat(e));case 3:return t.abrupt("return",e);case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()),p={fetchContacts:i,fetchAddContacts:l,fetchDeleteContacts:f,filterAction:Object(u.b)("contact/Filter")};e.a=p},49:function(t,e,n){},81:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(26),r=n.n(a),o=(n(49),n(14)),s=n(3),u=n(15),i=n(18),l=n(28),f=n(2),p=["auth","children"];var h=Object(o.b)((function(t){return{auth:t.auth}}),null)((function(t){var e=t.auth,n=t.children,c=Object(l.a)(t,p),a=e.isLogin;return Object(f.jsx)(s.b,Object(i.a)(Object(i.a)({},c),{},{children:a?n:Object(f.jsx)(s.a,{to:"/Contacts"})}))})),b=["auth","children","restricted"];var j,d,O=Object(o.b)((function(t){return{auth:t.auth}}),null)((function(t){var e=t.auth,n=t.children,c=t.restricted,a=void 0!==c&&c,r=Object(l.a)(t,b),o=e.isLogin&&a;return Object(f.jsx)(s.b,Object(i.a)(Object(i.a)({},r),{},{children:o?Object(f.jsx)(s.a,{to:"/"}):n}))})),v=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,87))})),x=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,88))})),g=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,91))})),k=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,89))})),m=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,90))})),C=Object(o.b)((function(t){return{auth:t.auth}}),null)((function(t){var e=Object(o.c)();return Object(c.useEffect)((function(){e(u.a.refreshContacts())}),[e]),!t.auth.ifRefresh&&Object(f.jsxs)(c.Suspense,{fallback:Object(f.jsx)("h1",{children:"AAAAA\u0412\u0421\u0422\u0420\u0410\u0410\u0410\u0410\u0410\u041b\u0418\u042f\u042f\u042f\u042f!!!"}),children:[Object(f.jsx)(v,{}),Object(f.jsxs)(s.d,{children:[Object(f.jsx)(O,{path:"/",exact:!0,children:Object(f.jsx)(m,{})}),Object(f.jsx)(O,{path:"/Login",exact:!0,restricted:!0,children:Object(f.jsx)(k,{})}),Object(f.jsx)(O,{path:"/Register",exact:!0,restricted:!0,children:Object(f.jsx)(x,{})}),Object(f.jsx)(h,{path:"/Contacts/",exact:!0,children:Object(f.jsx)(g,{})})]})]})})),y=n(43),w=n(27),A=n(4),z=n(17),L=n(8),R=n(6),D=n(21),S="",E=Object(A.d)([],(j={},Object(L.a)(j,D.a.fetchContacts.fulfilled,(function(t,e){return e.payload})),Object(L.a)(j,D.a.fetchAddContacts.fulfilled,(function(t,e){var n=e.payload;return t=[].concat(Object(w.a)(t),[n])})),Object(L.a)(j,D.a.fetchDeleteContacts.fulfilled,(function(t,e){var n=e.payload;return t=t.filter((function(t){return t.id!==n}))})),j)),J=Object(A.d)(S,Object(L.a)({},D.a.filterAction,(function(t,e){var n=e.payload;return""!==n?n:S}))),B=Object(R.b)({contacts:E,filter:J}),F=Object(A.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLogin:!1,ifRefresh:!1},extraReducers:(d={},Object(L.a)(d,u.a.registerContacts.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLogin=!0})),Object(L.a)(d,u.a.loginContacts.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLogin=!0})),Object(L.a)(d,u.a.logoutContacts.fulfilled,(function(t,e){t.isLogin=!1,t.user.name=null,t.user.email=null,t.token=null})),Object(L.a)(d,u.a.refreshContacts.pending,(function(t){t.ifRefresh=!0})),Object(L.a)(d,u.a.refreshContacts.fulfilled,(function(t,e){t.user=Object(i.a)({},e.payload),t.isLogin=!0,t.ifRefresh=!1})),Object(L.a)(d,u.a.refreshContacts.rejected,(function(t){t.ifRefresh=!1})),d)}).reducer,I=n(44),T={key:"auth",storage:n.n(I).a,whitelist:["token"]},V=Object(w.a)(Object(A.f)({serializableCheck:{ignoredActions:[z.a,z.f,z.b,z.c,z.d,z.e]}})),W=Object(A.a)({reducer:{auth:Object(z.g)(T,F),phonebook:B},middleware:V,devTools:!0}),q=Object(z.h)(W),G=n(20);r.a.render(Object(f.jsx)(o.a,{store:W,children:Object(f.jsx)(y.a,{loading:null,persistor:q,children:Object(f.jsx)(G.a,{children:Object(f.jsx)(C,{})})})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.d29aec3f.chunk.js.map